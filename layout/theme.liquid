<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ page_title }} - {{ shop.name }}</title>
    <meta name="description" content="{{ page_description | escape }}">
    {{ content_for_header }}
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    {{ 'base.css' | asset_url | stylesheet_tag }}
    <script>
      window.themeSettings = {
        enableParallax: true,
        buttonWidth: {{ settings.button_width | default: 200 }},
        buttonHeight: {{ settings.button_height | default: 56 }},
        buttonFontSize: {{ settings.button_font_size | default: 16 }},
        colorTeal: '{{ settings.color_teal | default: "#00d4aa" }}',
        colorPurple: '{{ settings.color_purple | default: "#8b5cf6" }}',
        colorAccent: '{{ settings.color_accent | default: "#00d4aa" }}'
      };
      
      // Shopify theme context - simplified and robust
      window.ShopifyTheme = {
        locale: '{{ request.locale.iso_code | default: "en" }}',
        country: '{{ localization.country.iso_code | default: "US" }}',
        currency: '{{ cart.currency.iso_code | default: "USD" }}',
        market: '{{ localization.market.handle | default: "us" }}',
        countryName: '{{ localization.country.name | default: "United States" }}',
        currencySymbol: '{{ cart.currency.symbol | default: "$" }}',
        availableMarkets: [
          {% for market in localization.available_markets %}
          {
            handle: '{{ market.handle }}',
            name: '{{ market.name }}',
            country: '{{ market.country.iso_code }}',
            countryName: '{{ market.country.name }}',
            currency: '{{ market.currency.iso_code }}',
            currencySymbol: '{{ market.currency.symbol }}'
          }{% unless forloop.last %},{% endunless %}
          {% endfor %}
        ],
        availableCountries: [
          {% for country in localization.available_countries %}
          {
            code: '{{ country.iso_code }}',
            name: '{{ country.name }}',
            currency: '{{ country.currency.iso_code }}',
            currencySymbol: '{{ country.currency.symbol }}'
          }{% unless forloop.last %},{% endunless %}
          {% endfor %}
        ],
        debug: {
          availableMarketsCount: {{ localization.available_markets.size | default: 0 }},
          currentMarket: '{{ localization.market.handle | default: "us" }}',
          currentCountry: '{{ localization.country.iso_code | default: "US" }}',
          hasAvailableMarkets: false,
          availableMarketsEmpty: true
        },
        fallbackMarkets: [
          {
            handle: 'us',
            name: 'United States',
            country: 'US',
            countryName: 'United States',
            currency: 'USD',
            currencySymbol: '$'
          },
          {
            handle: 'gb',
            name: 'United Kingdom',
            country: 'GB',
            countryName: 'United Kingdom',
            currency: 'GBP',
            currencySymbol: 'Â£'
          }
        ]
      };
    </script>
  </head>
  <body class="theme-body">
    <div class="animated-background">
      <!-- Shadertoy-style particles -->
      <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
      <div class="particle" style="left: 20%; animation-delay: 1s;"></div>
      <div class="particle" style="left: 30%; animation-delay: 2s;"></div>
      <div class="particle" style="left: 40%; animation-delay: 3s;"></div>
      <div class="particle" style="left: 50%; animation-delay: 4s;"></div>
      <div class="particle" style="left: 60%; animation-delay: 5s;"></div>
      <div class="particle" style="left: 70%; animation-delay: 6s;"></div>
      <div class="particle" style="left: 80%; animation-delay: 7s;"></div>
      <div class="particle" style="left: 90%; animation-delay: 8s;"></div>
      <div class="particle" style="left: 15%; animation-delay: 0.5s;"></div>
      <div class="particle" style="left: 25%; animation-delay: 1.5s;"></div>
      <div class="particle" style="left: 35%; animation-delay: 2.5s;"></div>
      <div class="particle" style="left: 45%; animation-delay: 3.5s;"></div>
      <div class="particle" style="left: 55%; animation-delay: 4.5s;"></div>
      <div class="particle" style="left: 65%; animation-delay: 5.5s;"></div>
      <div class="particle" style="left: 75%; animation-delay: 6.5s;"></div>
      <div class="particle" style="left: 85%; animation-delay: 7.5s;"></div>
      <div class="particle" style="left: 95%; animation-delay: 8.5s;"></div>
    </div>
    {% section 'header' %}
    <main id="MainContent" role="main" tabindex="-1">
      {{ content_for_layout }}
    </main>
    {% section 'footer' %}
    <script src="{{ 'theme.js' | asset_url }}" defer></script>
  <script src="{{ 'cart.js' | asset_url }}" defer></script>
  <script src="{{ 'country-selector.js' | asset_url }}" defer></script>
  <script src="{{ 'home-carousel.js' | asset_url }}" defer></script>
  </body>
</html>
