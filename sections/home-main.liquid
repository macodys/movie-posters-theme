{% comment %}
  Main homepage section with Wolt-style layout
{% endcomment %}

<div class="home-main">
  <!-- Discovery Navigation Tabs -->
  <div class="discovery-nav">
    <div class="nav-tabs">
      <button class="nav-tab active" data-tab="discovery">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polygon points="16.24,7.76 14.12,14.12 7.76,16.24 9.88,9.88 16.24,7.76"/>
        </svg>
        Discovery
      </button>
      <button class="nav-tab" data-tab="collections">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
          <path d="M8 21v-4a2 2 0 012-2h4a2 2 0 012 2v4"/>
        </svg>
        Collections
      </button>
      <button class="nav-tab" data-tab="products">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
          <line x1="8" y1="21" x2="16" y2="21"/>
          <line x1="12" y1="17" x2="12" y2="21"/>
        </svg>
        Products
      </button>
    </div>
  </div>


  <!-- Trending Products -->
  <div class="collections-section trending">
    <div class="section-header">
      <h2 class="section-title">Trending</h2>
      <div class="section-actions">
        <a href="/collections/trending" class="see-all-link">See all</a>
        <div class="carousel-controls">
          <button class="carousel-btn prev" data-carousel="trending">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15,18 9,12 15,6"/>
            </svg>
          </button>
          <button class="carousel-btn next" data-carousel="trending">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9,18 15,12 9,6"/>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <div class="carousel-container">
      <div class="carousel-track" data-carousel="trending">
        {% assign trending_collection = collections.trending %}
        {% if trending_collection and trending_collection.products_count > 0 %}
          {% for product in trending_collection.products limit: 8 %}
            <div class="product-card">
              <a href="{{ product.url }}" class="product-link">
                <div class="product-image">
                  {% if product.featured_image %}
                    <img src="{{ product.featured_image | image_url: width: 300 }}" alt="{{ product.title }}" loading="lazy">
                  {% else %}
                    <div class="placeholder-image">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5"/>
                        <polyline points="21,15 16,10 5,21"/>
                      </svg>
                    </div>
                  {% endif %}
                  <div class="product-overlay">
                    <div class="product-badge">Trending</div>
                  </div>
                </div>
                <div class="product-info">
                  <h3 class="product-title">{{ product.title | truncate: 30 }}</h3>
                  <div class="product-price">
                    {% if product.compare_at_price > product.price %}
                      <span class="price-sale">{{ product.price | money }}</span>
                      <span class="price-compare">{{ product.compare_at_price | money }}</span>
                    {% else %}
                      <span class="price">{{ product.price | money }}</span>
                    {% endif %}
                  </div>
                  <div class="product-rating">
                    <span class="rating-stars">★★★★★</span>
                    <span class="rating-value">4.8</span>
                  </div>
                </div>
              </a>
            </div>
          {% endfor %}
        {% else %}
          <!-- Fallback if no trending collection -->
          {% for i in (1..8) %}
            <div class="product-card">
              <div class="product-link">
                <div class="product-image">
                  <div class="placeholder-image">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                      <circle cx="8.5" cy="8.5" r="1.5"/>
                      <polyline points="21,15 16,10 5,21"/>
                    </svg>
                  </div>
                  <div class="product-overlay">
                    <div class="product-badge">Trending</div>
                  </div>
                </div>
                <div class="product-info">
                  <h3 class="product-title">Sample Product {{ i }}</h3>
                  <div class="product-price">
                    <span class="price">$29.99</span>
                  </div>
                  <div class="product-rating">
                    <span class="rating-stars">★★★★★</span>
                    <span class="rating-value">4.8</span>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>

  <!-- New Products -->
  <div class="collections-section new">
    <div class="section-header">
      <h2 class="section-title">New</h2>
      <div class="section-actions">
        <a href="/collections/new" class="see-all-link">See all</a>
        <div class="carousel-controls">
          <button class="carousel-btn prev" data-carousel="new">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15,18 9,12 15,6"/>
            </svg>
          </button>
          <button class="carousel-btn next" data-carousel="new">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9,18 15,12 9,6"/>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <div class="carousel-container">
      <div class="carousel-track" data-carousel="new">
        {% assign new_collection = collections.new %}
        {% if new_collection and new_collection.products_count > 0 %}
          {% for product in new_collection.products limit: 8 %}
            <div class="product-card">
              <a href="{{ product.url }}" class="product-link">
                <div class="product-image">
                  {% if product.featured_image %}
                    <img src="{{ product.featured_image | image_url: width: 300 }}" alt="{{ product.title }}" loading="lazy">
                  {% else %}
                    <div class="placeholder-image">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5"/>
                        <polyline points="21,15 16,10 5,21"/>
                      </svg>
                    </div>
                  {% endif %}
                  <div class="product-overlay">
                    <div class="product-badge new">New</div>
                  </div>
                </div>
                <div class="product-info">
                  <h3 class="product-title">{{ product.title | truncate: 30 }}</h3>
                  <div class="product-price">
                    {% if product.compare_at_price > product.price %}
                      <span class="price-sale">{{ product.price | money }}</span>
                      <span class="price-compare">{{ product.compare_at_price | money }}</span>
                    {% else %}
                      <span class="price">{{ product.price | money }}</span>
                    {% endif %}
                  </div>
                  <div class="product-rating">
                    <span class="rating-stars">★★★★★</span>
                    <span class="rating-value">4.9</span>
                  </div>
                </div>
              </a>
            </div>
          {% endfor %}
        {% else %}
          <!-- Fallback: Show recently added products from all collections -->
          {% assign recent_products = collections.all.products | sort: 'created_at' | reverse %}
          {% for product in recent_products limit: 8 %}
            <div class="product-card">
              <a href="{{ product.url }}" class="product-link">
                <div class="product-image">
                  {% if product.featured_image %}
                    <img src="{{ product.featured_image | image_url: width: 300 }}" alt="{{ product.title }}" loading="lazy">
                  {% else %}
                    <div class="placeholder-image">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5"/>
                        <polyline points="21,15 16,10 5,21"/>
                      </svg>
                    </div>
                  {% endif %}
                  <div class="product-overlay">
                    <div class="product-badge new">New</div>
                  </div>
                </div>
                <div class="product-info">
                  <h3 class="product-title">{{ product.title | truncate: 30 }}</h3>
                  <div class="product-price">
                    {% if product.compare_at_price > product.price %}
                      <span class="price-sale">{{ product.price | money }}</span>
                      <span class="price-compare">{{ product.compare_at_price | money }}</span>
                    {% else %}
                      <span class="price">{{ product.price | money }}</span>
                    {% endif %}
                  </div>
                  <div class="product-rating">
                    <span class="rating-stars">★★★★★</span>
                    <span class="rating-value">4.9</span>
                  </div>
                </div>
              </a>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Home Main",
  "settings": [],
  "presets": [
    {
      "name": "Home Main"
    }
  ]
}
{% endschema %}

