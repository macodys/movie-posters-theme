<section class="collections-carousel">
  <!-- Hot Collections Section -->
  <div class="carousel-section">
    <div class="section-header">
      <h2 class="section-title">Hot Collections</h2>
      <div class="section-actions">
        <a href="/collections/bestsellers" class="see-all-link">See all</a>
        <div class="carousel-controls">
          <button class="carousel-btn prev" data-target="hot-collections">&#10094;</button>
          <button class="carousel-btn next" data-target="hot-collections">&#10095;</button>
        </div>
      </div>
    </div>
    
    <div class="carousel-container" id="hot-collections">
      <div class="carousel-track">
        {% assign hot_cols = section.settings.hot_collections %}
        {% if hot_cols and hot_cols.size > 0 %}
          {% for collection in hot_cols %}
            <div class="poster-card">
              <a href="{{ collection.url }}" class="poster-link">
                <div class="poster-image">
                  {% if collection.image %}
                    <img src="{{ collection.image | image_url: width: 600 }}" alt="{{ collection.title }}" loading="lazy">
                  {% else %}
                    <div class="placeholder-image">{{ collection.title }}</div>
                  {% endif %}
                  <div class="poster-overlay">
                    <h3>{{ collection.title }}</h3>
                  </div>
                </div>
              </a>
            </div>
          {% endfor %}
        {% else %}
          {% comment %} Fallback to some known collections if list is empty {% endcomment %}
          {% for handle in "tv-movies,games,music,sports" | split: "," %}
            {% assign col = collections[handle] %}
            {% if col %}
              <div class="poster-card">
                <a href="{{ col.url }}" class="poster-link">
                  <div class="poster-image">
                    {% if col.image %}
                      <img src="{{ col.image | image_url: width: 600 }}" alt="{{ col.title }}" loading="lazy">
                    {% else %}
                      <div class="placeholder-image">{{ col.title }}</div>
                    {% endif %}
                    <div class="poster-overlay">
                      <h3>{{ col.title }}</h3>
                    </div>
                  </div>
                </a>
              </div>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>

  <!-- New Collections Section -->
  <div class="carousel-section">
    <div class="section-header">
      <h2 class="section-title">New</h2>
      <div class="section-actions">
        <a href="/collections/new" class="see-all-link">See all</a>
        <div class="carousel-controls">
          <button class="carousel-btn prev" data-target="new-collections">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15,18 9,12 15,6"></polyline>
            </svg>
          </button>
          <button class="carousel-btn next" data-target="new-collections">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9,18 15,12 9,6"></polyline>
            </svg>
          </button>
        </div>
      </div>
    </div>
    
    <div class="carousel-container" id="new-collections">
      <div class="carousel-track">
        {% assign new_cols = section.settings.new_collections %}
        {% if new_cols and new_cols.size > 0 %}
          {% for collection in new_cols %}
            <div class="poster-card">
              <a href="{{ collection.url }}" class="poster-link">
                <div class="poster-image">
                  {% if collection.image %}
                    <img src="{{ collection.image | image_url: width: 600 }}" alt="{{ collection.title }}" loading="lazy">
                  {% else %}
                    <div class="placeholder-image">{{ collection.title }}</div>
                  {% endif %}
                  <div class="poster-overlay">
                    <h3>{{ collection.title }}</h3>
                  </div>
                </div>
              </a>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Trending Collections Section -->
  <div class="carousel-section">
    <div class="section-header">
      <h2 class="section-title">Trending</h2>
      <div class="section-actions">
        <a href="/collections/trending" class="see-all-link">See all</a>
        <div class="carousel-controls">
          <button class="carousel-btn prev" data-target="trending-collections">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15,18 9,12 15,6"></polyline>
            </svg>
          </button>
          <button class="carousel-btn next" data-target="trending-collections">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9,18 15,12 9,6"></polyline>
            </svg>
          </button>
        </div>
      </div>
    </div>
    
    <div class="carousel-container" id="trending-collections">
      <div class="carousel-track">
        {% assign trending_cols = section.settings.trending_collections %}
        {% if trending_cols and trending_cols.size > 0 %}
          {% for collection in trending_cols %}
            <div class="poster-card">
              <a href="{{ collection.url }}" class="poster-link">
                <div class="poster-image">
                  {% if collection.image %}
                    <img src="{{ collection.image | image_url: width: 600 }}" alt="{{ collection.title }}" loading="lazy">
                  {% else %}
                    <div class="placeholder-image">{{ collection.title }}</div>
                  {% endif %}
                  <div class="poster-overlay">
                    <h3>{{ collection.title }}</h3>
                  </div>
                </div>
              </a>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Collections Carousel",
  "settings": [
    {
      "type": "collection_list",
      "id": "hot_collections",
      "label": "Hot collections"
    },
    {
      "type": "collection_list",
      "id": "new_collections",
      "label": "New collections"
    },
    {
      "type": "collection_list",
      "id": "trending_collections",
      "label": "Trending collections"
    }
  ],
  "presets": [{"name": "Collections Carousel"}]
}
{% endschema %}
